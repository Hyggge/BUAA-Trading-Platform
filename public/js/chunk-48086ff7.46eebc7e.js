(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48086ff7"],{4133:function(t,e,s){"use strict";var i=s("aea8"),a=s("0e5a"),o=s("6d91"),n=s("d165"),r=s("feb6"),c=s("2ab8"),l=RangeError,m=String,u=Math.floor,d=a(r),p=a("".slice),f=a(1..toFixed),y=function(t,e,s){return 0===e?s:e%2===1?y(t,e-1,s*t):y(t*t,e/2,s)},_=function(t){var e=0,s=t;while(s>=4096)e+=12,s/=4096;while(s>=2)e+=1,s/=2;return e},g=function(t,e,s){var i=-1,a=s;while(++i<6)a+=e*t[i],t[i]=a%1e7,a=u(a/1e7)},h=function(t,e){var s=6,i=0;while(--s>=0)i+=t[s],t[s]=u(i/e),i=i%e*1e7},v=function(t){var e=6,s="";while(--e>=0)if(""!==s||0===e||0!==t[e]){var i=m(t[e]);s=""===s?i:s+d("0",7-i.length)+i}return s},b=c((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!c((function(){f({})}));i({target:"Number",proto:!0,forced:b},{toFixed:function(t){var e,s,i,a,r=n(this),c=o(t),u=[0,0,0,0,0,0],f="",b="0";if(c<0||c>20)throw l("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return m(r);if(r<0&&(f="-",r=-r),r>1e-21)if(e=_(r*y(2,69,1))-69,s=e<0?r*y(2,-e,1):r/y(2,e,1),s*=4503599627370496,e=52-e,e>0){g(u,0,s),i=c;while(i>=7)g(u,1e7,0),i-=7;g(u,y(10,i,1),0),i=e-1;while(i>=23)h(u,1<<23),i-=23;h(u,1<<i),g(u,1,1),h(u,2),b=v(u)}else g(u,0,s),g(u,1<<-e,0),b=v(u)+d("0",c);return c>0?(a=b.length,b=f+(a<=c?"0."+d("0",c-a)+b:p(b,0,a-c)+"."+p(b,a-c))):b=f+b,b}})},a00f:function(t,e,s){"use strict";s("a182")},a182:function(t,e,s){},aad5:function(t,e,s){"use strict";s("b238")},b238:function(t,e,s){},bc59:function(t,e,s){"use strict";var i=s("aea8"),a=s("77ee"),o=s("98f2"),n=s("f4cd"),r=s("2df7"),c=s("97a8"),l=1!==[].unshift(0),m=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}}();i({target:"Array",proto:!0,arity:1,forced:l||m},{unshift:function(t){var e=a(this),s=o(e),i=arguments.length;if(i){c(s+i);var l=s;while(l--){var m=l+i;l in e?e[m]=e[l]:r(e,m)}for(var u=0;u<i;u++)e[u]=arguments[u]}return n(e,s+i)}})},cf58:function(t,e,s){"use strict";s.r(e);s("2482"),s("2445"),s("89b9");var i=function(){var t=this,e=t._self._c;return e("d2-container",[e("el-row",{staticStyle:{"margin-top":"10px"}},[e("el-col",{attrs:{span:9,offset:1}},[e("img",{staticStyle:{"border-radius":"20px",width:"100%"},attrs:{src:t.commodityDetails.image_url}})]),e("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:12,offset:1}},[e("h3",{staticStyle:{color:"black"}},[t._v(" "+t._s(t.commodityDetails.name+": "+t.commodityDetails.introduction)+" ")]),e("h5",{staticStyle:{color:"lightslategray"}},[t._v(" 已售 "+t._s(t.commodityDetails.sale)+" ")]),e("h1",{staticStyle:{color:"#ff8226","padding-top":"10px"}},[e("span",{staticStyle:{"font-size":"12px"}},[t._v("¥")]),t._v(" "+t._s(this.curPrice)+" ")]),e("el-row",{staticClass:"term"},[e("el-col",{staticClass:"title",attrs:{span:3}},[t._v(" 商品余量:")]),e("el-col",{staticClass:"content",attrs:{span:20}},[t._v(" "+t._s(t.commodityDetails.total-t.commodityDetails.sale)+" ")])],1),e("el-row",{staticClass:"term"},[e("el-col",{staticClass:"title",attrs:{span:3}},[t._v(" 商品评分:")]),e("el-col",{staticClass:"content",attrs:{span:20}},[null!==t.commodityDetails.grade?e("el-rate",{attrs:{disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},model:{value:t.commodityDetails.grade,callback:function(e){t.$set(t.commodityDetails,"grade",e)},expression:"commodityDetails.grade"}}):e("div",[t._v("暂无评分")])],1)],1),e("el-row",{staticClass:"term"},[e("el-col",{staticClass:"title",attrs:{span:3}},[t._v(" 交易方式:")]),e("el-col",{staticClass:"content",attrs:{span:20}},[0===t.commodityDetails.method?e("el-tag",{attrs:{type:"success",size:"mini"}},[e("strong",[t._v("线上交易")])]):t._e(),1===t.commodityDetails.method?e("el-tag",{attrs:{type:"primary",size:"mini"}},[e("strong",[t._v("线下自取")])]):t._e(),2===t.commodityDetails.method?e("el-tag",{attrs:{type:"warning",size:"mini"}},[e("strong",[t._v("送货上门")])]):t._e()],1)],1),e("el-row",{staticClass:"term"},[e("el-col",{staticClass:"title",attrs:{span:3}},[t._v(" 商品状态:")]),e("el-col",{staticClass:"content",attrs:{span:20}},[0===t.commodityDetails.status?e("el-tag",{attrs:{type:"primary",size:"mini"}},[e("strong",[t._v("未生效")])]):t._e(),1===t.commodityDetails.status?e("el-tag",{attrs:{type:"warning",size:"mini"}},[e("strong",[t._v("预售中")])]):t._e(),2===t.commodityDetails.status?e("el-tag",{attrs:{type:"success",size:"mini"}},[e("strong",[t._v("售卖中")])]):t._e(),3===t.commodityDetails.status?e("el-tag",{attrs:{type:"info",size:"mini"}},[e("strong",[t._v("已下架")])]):t._e()],1)],1),t._l(t.commodityDetails.params,(function(s,i){return e("el-row",{key:s.id,staticClass:"term"},[e("el-col",{staticClass:"title",attrs:{span:3}},[t._v(" "+t._s(s.name)+":")]),e("el-col",{staticClass:"content",attrs:{span:20}},[e("el-radio-group",{attrs:{size:"mini"},model:{value:t.selectedOptions[i],callback:function(e){t.$set(t.selectedOptions,i,e)},expression:"selectedOptions[paramIndex]"}},t._l(s.options,(function(s){return e("el-radio",{key:s.id,staticStyle:{"margin-right":"10px"},attrs:{label:s.id,border:""},on:{change:function(e){return t.onClickOption(i,s.add)}}},[t._v(" "+t._s(s.description)+" ")])})),1)],1)],1)})),e("el-row",{staticClass:"term"},[e("el-col",{staticClass:"title",staticStyle:{"padding-top":"6px"},attrs:{span:3}},[t._v(" 数量:")]),e("el-col",{staticClass:"content",attrs:{span:20}},[e("el-input-number",{attrs:{max:t.commodityDetails.total-t.commodityDetails.sale,min:1,size:"mini"},on:{change:t.onClickCounter},model:{value:t.form.num,callback:function(e){t.$set(t.form,"num",e)},expression:"form.num"}})],1)],1),e("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"danger",round:""},on:{click:t.openModal}},[t._v("立即下单")]),e("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary",round:""},on:{click:t.copyLink}},[t._v("复制链接")]),!1===t.commodityDetails.is_collected?e("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"success",round:""},on:{click:t.collect}},[t._v("我要收藏")]):e("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"warning",round:""},on:{click:t.cancel_collect}},[t._v("取消收藏")])],2)],1),e("el-tabs",{model:{value:t.curPane,callback:function(e){t.curPane=e},expression:"curPane"}},[e("el-tab-pane",{attrs:{label:"用户评价",name:"comments"}},[e("comments",{attrs:{commodityId:t.commodityId}})],1),e("el-tab-pane",{attrs:{label:"商品预览图",name:"otherImages"}},[e("el-row",{attrs:{gutter:30}},[e("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{span:6}},[e("div",[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.commodityDetails.image_url,alt:""}})])]),t._l(t.commodityDetails.img_url_list,(function(t){return e("div",[e("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{span:6}},[e("div",[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t}})])])],1)}))],2)],1)],1),e("Modal",{attrs:{title:"请确认订单信息"},on:{"on-ok":t.submitOrder,"on-cancel":function(e){return t.$Message.error("取消下单")}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e("el-descriptions",{staticClass:"margin-top",attrs:{column:2,size:t.size,border:""}},[e("el-descriptions-item",[e("template",{slot:"label"},[t._v(" 购买数量 ")]),t._v(" "+t._s(t.form.num)+" ")],2),e("el-descriptions-item",[e("template",{slot:"label"},[t._v(" 总价格 ")]),t._v(" "+t._s("¥"+t.curPrice)+" ")],2),e("el-descriptions-item",[e("template",{slot:"label"},[t._v(" 交易方式 ")]),0===t.commodityDetails.method?e("el-tag",{attrs:{type:"success",size:"mini"}},[e("strong",[t._v("线上交易")])]):t._e(),1===t.commodityDetails.method?e("el-tag",{attrs:{type:"primary",size:"mini"}},[e("strong",[t._v("线下自取")])]):t._e(),2===t.commodityDetails.method?e("el-tag",{attrs:{type:"warning",size:"mini"}},[e("strong",[t._v("送货上门")])]):t._e()],2),e("el-descriptions-item",[e("template",{slot:"label"},[t._v(" 商品状态 ")]),0===t.commodityDetails.status?e("el-tag",{attrs:{type:"primary",size:"mini"}},[e("strong",[t._v("未生效")])]):t._e(),1===t.commodityDetails.status?e("el-tag",{attrs:{type:"warning",size:"mini"}},[e("strong",[t._v("预售中")])]):t._e(),2===t.commodityDetails.status?e("el-tag",{attrs:{type:"success",size:"mini"}},[e("strong",[t._v("售卖中")])]):t._e(),3===t.commodityDetails.status?e("el-tag",{attrs:{type:"info",size:"mini"}},[e("strong",[t._v("已下架")])]):t._e()],2),t._l(t.commodityDetails.parameters,(function(s,i){return e("el-descriptions-item",{key:s.id,attrs:{span:2}},[e("template",{slot:"label"},[t._v(" "+t._s(s.name)+" ")]),t._l(s.options,(function(s){return e("div",{key:s.id},[s.id===t.selectedOptions[i]?e("el-tag",{staticStyle:{"margin-right":"10px"},attrs:{size:"mini"}},[t._v(" "+t._s("".concat(s.description))+" ")]):t._e()],1)}))],2)})),e("el-descriptions-item",{attrs:{span:2}},[e("template",{slot:"label"},[t._v(" 地址 ")]),e("el-input",{attrs:{placeholder:"请输入交易地址（可选）"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],2),e("el-descriptions-item",{attrs:{span:2}},[e("template",{slot:"label"},[t._v(" 备注 ")]),e("el-input",{attrs:{type:"textarea",placeholder:"请输入备注（可选）"},model:{value:t.form.note,callback:function(e){t.$set(t.form,"note",e)},expression:"form.note"}})],2)],2)],1)],1)},a=[],o=s("272e"),n=s("d18b"),r=s("da3e"),c=(s("f7e8"),s("557d"),s("bc59"),s("4133"),s("ae26"),s("365c")),l=function(){var t=this,e=t._self._c;return e("div",t._l(t.commentList,(function(s){return e("div",{key:s.id,staticClass:"author-title reply-father"},[e("el-avatar",{staticClass:"header-img",attrs:{size:40,src:null!=s.user_image_url?s.user_image_url:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}}),e("div",{staticClass:"author-info"},[e("span",{staticClass:"author-name"},[t._v(t._s(s.username))]),e("span",{staticClass:"author-time"},[t._v(" "+t._s(t.formatTime(s.comment_time))+" "),0!==s.options.length?e("span",t._l(s.options,(function(s){return e("el-tag",{staticStyle:{"margin-right":"5px"},attrs:{size:"mini",type:"info"}},[t._v(t._s(s))])})),1):t._e()]),e("span",{staticClass:"author-time"})]),e("div",{staticClass:"talk-box"},[e("p",[e("span",{staticClass:"reply"},[t._v(t._s(""===s.content?"暂无评价":s.content))])])])],1)})),0)},m=[],u=s("c276"),d={name:"ArticleComment",props:["commodityId"],data:function(){return{commentList:{},filterTotalCnt:"",currentPage:1}},methods:{formatTime:u["a"].time.formatTime,getCommentList:function(){var t=this;return Object(r["a"])(Object(n["a"])().mark((function e(){var s;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].GET_COMMENT_LIST_OF_COMMODITY(t.commodityId);case 2:s=e.sent,t.commentList=s.data,t.filterTotalCnt=s.tot_count,console.log(t.filterTotalCnt),console.log(t.commentList);case 7:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.getCommentList()}},p=d,f=(s("aad5"),s("e607")),y=Object(f["a"])(p,l,m,!1,null,"4b183339",null),_=y.exports,g={name:"show-commodity-details-for-user",components:{comments:_},data:function(){return{commodityId:this.$route.params.id,commodityDetails:{},selectedOptions:[],selectedAdditions:[],curPrice:0,curPane:"comments",modal:!1,form:{num:1,address:"",note:""}}},methods:{getCommodityDetails:function(){var t=this;return Object(r["a"])(Object(n["a"])().mark((function e(){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].GET_COMMODITY_DETAILS(t.commodityId);case 2:t.commodityDetails=e.sent,t.commodityDetails.params.forEach((function(){t.selectedOptions.unshift(0),t.selectedAdditions.unshift(0)})),t.curPrice=t.calcPrice(),console.log(t.commodityDetails);case 6:case"end":return e.stop()}}),e)})))()},formatPrice:function(t,e,s){return(s*(parseFloat(t)+parseFloat(e))).toFixed(2)},calcPrice:function(){var t=0;return this.selectedAdditions.forEach((function(e,s){t+=parseFloat(e)})),this.formatPrice(this.commodityDetails.price,t,this.form.num)},onClickOption:function(t,e){this.selectedAdditions[t]=e,this.curPrice=this.calcPrice()},onClickCounter:function(){this.curPrice=this.calcPrice()},openModal:function(){var t,e=Object(o["a"])(this.selectedOptions);try{for(e.s();!(t=e.n()).done;){var s=t.value;if(console.log(s),0===s)return void this.$Message.error("参数选择不全！")}}catch(i){e.e(i)}finally{e.f()}this.modal=!0},submitOrder:function(){Object.assign(this.form,{selected_options:this.selectedOptions.filter((function(t){return 0!==t})),commodity_id:this.commodityId}),c["a"].SUBMIT_ORDER(this.form),this.$Message.success("下单成功")},copyLink:function(){var t=this;return Object(r["a"])(Object(n["a"])().mark((function e(){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$copyText(window.location.href);case 2:t.$Message.success("已经成功复制到剪切板！");case 3:case"end":return e.stop()}}),e)})))()},collect:function(){var t=this;return Object(r["a"])(Object(n["a"])().mark((function e(){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].COLLECT_COMMODITY(t.commodityId);case 2:return t.$Message.success("收藏成功！"),e.next=5,t.getCommodityDetails();case 5:case"end":return e.stop()}}),e)})))()},cancel_collect:function(){var t=this;return Object(r["a"])(Object(n["a"])().mark((function e(){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].CANCEL_COLLECT_COMMODITY(t.commodityId);case 2:return t.$Message.success("已取消收藏！"),e.next=5,t.getCommodityDetails();case 5:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.getCommodityDetails()}},h=g,v=(s("a00f"),Object(f["a"])(h,i,a,!1,null,"2eacd121",null));e["default"]=v.exports},feb6:function(t,e,s){"use strict";var i=s("6d91"),a=s("06dc"),o=s("a1c8"),n=RangeError;t.exports=function(t){var e=a(o(this)),s="",r=i(t);if(r<0||r==1/0)throw n("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(s+=e);return s}}}]);