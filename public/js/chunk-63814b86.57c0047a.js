(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63814b86"],{"1fa2":function(e,l,a){"use strict";a.r(l);a("5f3b");var t=function(){var e=this,l=e._self._c;return l("d2-container",{scopedSlots:e._u([{key:"header",fn:function(){return[l("h3",[e._v("学生认证")])]},proxy:!0}])},[l("el-row",[l("el-col",{attrs:{span:12,offset:4,"label-width":"80px"}},[l("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[l("el-form-item",{attrs:{label:"学号",required:""}},[l("el-input",{on:{blur:e.checkDupStudentId},model:{value:e.form.student_id,callback:function(l){e.$set(e.form,"student_id","string"===typeof l?l.trim():l)},expression:"form.student_id"}})],1),l("el-form-item",{attrs:{label:"姓名",required:""}},[l("el-input",{model:{value:e.form.student_name,callback:function(l){e.$set(e.form,"student_name","string"===typeof l?l.trim():l)},expression:"form.student_name"}})],1),l("el-form-item",{attrs:{label:"性别",required:""}},[l("el-radio",{attrs:{label:0},model:{value:e.form.gender,callback:function(l){e.$set(e.form,"gender",l)},expression:"form.gender"}},[e._v("男")]),l("el-radio",{attrs:{label:1},model:{value:e.form.gender,callback:function(l){e.$set(e.form,"gender",l)},expression:"form.gender"}},[e._v("女")])],1),l("el-form-item",{attrs:{label:"入学年份",required:""}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy",type:"year",placeholder:"选择年"},model:{value:e.form.attendance_year,callback:function(l){e.$set(e.form,"attendance_year",l)},expression:"form.attendance_year"}})],1),l("el-form-item",{attrs:{label:"院系",required:""}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.depart,callback:function(l){e.$set(e.form,"depart",l)},expression:"form.depart"}},e._l(e.options,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),l("el-form-item",{attrs:{label:"学生证件",required:""}},[l("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/images","show-file-list":!1,headers:{Authorization:"Bearer "+e.token},"on-success":e.handleUploadSuccess,"before-upload":e.beforeImageUpload}},[l("el-row",[l("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{"text-align":"left"}})]),l("el-row",[e.imageUrl?l("el-image",{staticStyle:{width:"250px"},attrs:{src:e.imageUrl,fit:e.fit}}):e._e()],1)],1)],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即认证")])],1)],1)],1)],1)],1)},r=[],n=(a("b141"),a("f7e8"),a("6657"),a("dc52"),a("5652"),a("dd35"),a("365c")),o=a("c276"),u=a("cc32"),i={name:"user-certificate",data:function(){return{imageUrl:"",token:o["a"].cookies.get("token"),form:{student_id:"",student_name:"",depart:1,attendance_year:"2022",gender:0,image_id:""},valid:!0,options:u["a"]}},methods:{onSubmit:function(){var e=this;""!==this.form.student_id&&""!==this.form.student_name&&""!==this.form.image_id||(this.$Message.error("表单项不能为空"),this.valid=!1),this.checkDupStudentId(this.form.student_id),this.valid&&n["a"].SUBMIT_USER_CERTIFICATE(this.form).then((function(l){e.$Message.success("认证成功！"),e.$router.push({path:"/user/details"})})).catch((function(e){console.log(e)}))},checkDupStudentId:function(){var e=this;n["a"].CHECK_DUP_STUDENT_ID(this.form.student_id).then((function(l){!0===l.exist?(e.valid=!1,e.$Message.error("该学号已被认证过")):e.valid=!0})).catch((function(e){console.log(e)}))},beforeImageUpload:function(e){var l="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return l||this.$Message.error("上传图片只能是 JPG/PNG 格式!"),a||this.$Message.error("上传图片大小不能超过 2MB!"),l&&a},handleUploadSuccess:function(e,l){null!==e.id&&(this.imageUrl=URL.createObjectURL(l.raw),this.form.image_id=e.id)}}},s=i,c=a("e607"),d=Object(c["a"])(s,t,r,!1,null,"617ce95c",null);l["default"]=d.exports},"5f3b":function(e,l,a){"use strict";var t=a("aea8"),r=a("cde5").trim,n=a("ab15");t({target:"String",proto:!0,forced:n("trim")},{trim:function(){return r(this)}})},ab15:function(e,l,a){var t=a("ea8a").PROPER,r=a("2ab8"),n=a("7efc"),o="​᠎";e.exports=function(e){return r((function(){return!!n[e]()||o[e]()!==o||t&&n[e].name!==e}))}},cc32:function(e,l,a){"use strict";a.d(l,"b",(function(){return r})),a.d(l,"a",(function(){return t}));a("f7e8");var t=[{value:1,label:"材料科学与工程学院"},{value:2,label:"电子信息工程学院"},{value:3,label:"自动化科学与电器工程学院"},{value:4,label:"能源与动力工程学院"},{value:5,label:"航空科学与工程学院"},{value:6,label:"计算机学院"},{value:7,label:"机械工程及自动化学院"},{value:8,label:"经济管理学院"},{value:9,label:"数学科学学院"},{value:10,label:"生物与医学工程学院"},{value:11,label:"人文社会科学学院"},{value:12,label:"外国语学院"},{value:13,label:"交通科学与工程学院"},{value:14,label:"可靠性与系统工程学院"},{value:15,label:"宇航学院"},{value:16,label:"飞行学院"},{value:17,label:"仪器科学与光电学院"},{value:18,label:"北京学院"},{value:19,label:"物理学院"},{value:20,label:"法学院"},{value:21,label:"软件学院"},{value:23,label:"高等理工学院"},{value:24,label:"中法工程师学院"},{value:25,label:"国际学院"},{value:26,label:"新媒体艺术与设计学院"},{value:27,label:"化学学院"},{value:28,label:"马克思主义学院"},{value:29,label:"人文与社会科学高等研究院"},{value:30,label:"空间与环境学院"},{value:31,label:"无人系统研究院"},{value:32,label:"航空发动机学院"},{value:35,label:"国际通用工程学院"},{value:37,label:"北航学院"},{value:71,label:"传源书院"},{value:73,label:"士谔书院"},{value:74,label:"冯如书院"},{value:75,label:"士嘉书院"},{value:76,label:"守谔书院"},{value:77,label:"致真书院"},{value:79,label:"知行书院"},{value:38,label:"医学科学与工程学院"},{value:39,label:"网络空间安全学院"},{value:41,label:"集成电路科学与工程学院"},{value:42,label:"人工智能研究院"},{value:43,label:"前沿科学技术创新研究院"}],r=function(e){var l="";return t.forEach((function(a,t){a.value===e&&(l=a.label)})),l}}}]);